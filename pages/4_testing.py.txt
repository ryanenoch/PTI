import streamlit as stm
import folium
from streamlit_folium import st_folium
from folium import plugins

stm.title("Pothole Tracking Initiative")
stm.header('Testing for click for marker & LatLngPopup')

# center on SSM
center = [46.5277912, -84.3306842]

m = folium.Map(location=center,zoom_start=14,dragging=False,scrollWheelZoom=False)


plugins.LocateControl(
  auto_start=False,
  flyTo=True,
  enableHighAccuracy=True,
  drawCircle=True,
  drawMarker=True,
  strings={
    "title": "See your current location",
    "popup": "You're within {distance} {unit} from this point"
  }).add_to(m)

x1=m.add_child(folium.LatLngPopup())
x2=m.add_child(folium.ClickForMarker(popup="Waypoint"))

print(x1)
print(x2)

# call to render Folium map in Streamlit
st_data = st_folium(m, width='90%', height=500)

if 'center' in st_data:
  lat, lng = (st_data['center']['lat'], st_data['center']['lng'])
  stm.text("Coordinates \n{}, {}".format(lat, lng))
